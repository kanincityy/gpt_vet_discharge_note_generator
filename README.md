# Veterinary Discharge Note Generator

This script uses the OpenAI API (GPT-3.5-turbo) to generate a veterinary discharge note based on structured consultation data provided in a JSON file.

## Features

- Parses consultation details from a JSON input file.
- Constructs a summary prompt for the OpenAI API.
- Calls the API to generate a patient-friendly discharge note.
- Outputs the generated note in JSON format.

## Project Structure

The repository is organised as follows:

```
vet-discharge-note-generator/
│
├── .vscode/
│   └── launch.json       # VS Code debugger configuration
│
├── data/
│   └── consultation1.json # Sample input data file
│
├── solution/             # Default output directory (created by user if needed)
│   └── discharge_note1.json # Example output generated by the script
│
├── .gitignore            # Specifies intentionally untracked files for Git
├── generate_notes.py     # The main Python script for note generation
├── README.md             # This documentation file
└── requirements.txt      # List of Python dependencies for the project
```

## Setup

1.  **Clone the repository:**
    ```bash
    # Replace the URL with your actual repository URL if different
    git clone https://github.com/kanincityy/vet_discharge_note_generator.git
    cd vet_discharge_note_generator
    ```

2.  **Create a virtual environment:**
    *   Make sure you have Python 3 installed.
    ```bash
    python -m venv venv
    ```

3.  **Activate the virtual environment:**
    *   **Windows (Command Prompt/PowerShell):** `venv\Scripts\activate` (or `.bat` / `.ps1`)
    *   **macOS/Linux (Bash/Zsh):** `source venv/bin/activate`

4.  **Install dependencies:**
    *   This installs the libraries listed in `requirements.txt`.
    ```bash
    pip install -r requirements.txt
    ```

5.  **Create `.env` file:**
    *   Create a file named `.env` in the project root directory (e.g., `vet_discharge_note_generator`).
    *   Add your OpenAI API key to this file like so:
        ```dotenv
        OPENAI_API_KEY=sk-YourActualOpenAIKeyHere
        ```
    *   **(Important: This `.env` file contains your secret key and is listed in `.gitignore` so it should NOT be committed to GitHub.)**

## Usage

The primary way to use the script is via the command line.

**Command Line:**

1.  Make sure your virtual environment is activated.
2.  Ensure the output directory exists (e.g., `mkdir solution` if outputting to `solution/`).
3.  Run the script, providing the path to your input JSON file and redirecting the standard output (`>`) to a desired output file.

    ```bash
    python generate_notes.py path/to/your/input.json > path/to/your/output.json
    ```

    *Example using the provided sample data:*
    ```bash
    # (Optional) Create the output directory if it doesn't exist
    # mkdir solution

    # Run the script
    python generate_notes.py data/consultation1.json > solution/discharge_note1.json
    ```

**Alternative Usage (VS Code Debugger for Development/Testing):**

Running the script via the VS Code debugger is useful for development or step-by-step testing.

1.  Open the project folder (e.g., `vet_discharge_note_generator`) in VS Code.
2.  Ensure the Python interpreter for the `venv` is selected (Check the bottom status bar or use Ctrl+Shift+P > "Python: Select Interpreter").
3.  Modify the `args` array within the configuration in `.vscode/launch.json` to point to your desired input JSON file (e.g., `"args": ["data/consultation1.json"]`).
4.  Press F5 to start debugging. The script will run, and the final JSON output will be printed to the VS Code integrated terminal panel.

## Input JSON Format

The script expects an input JSON file structured similarly to the example provided in `data/consultation1.json`. The essential structure includes top-level `patient` and `consultation` objects:

```json
{
  "patient": {
    "name": "Example Pet",
    "species": "Example Species",
    // ... other patient details
  },
  "consultation": {
    "date": "YYYY-MM-DD",
    "reason": "Reason for visit",
    "clinical_notes": [ { "note": "Observation text" } ], // Optional
    "treatment_items": { // Optional section
        "procedures": [ { "name": "Procedure Name" } ],
        "medicines": [ { "name": "Medicine Administered" } ],
        "prescriptions": [ { "name": "Medication for Home" } ],
        "foods": [ { "name": "Food Item" } ],
        "supplies": [ { "name": "Supply Item" } ]
    },
    "diagnostics": [ { "name": "Diagnostic Test" } ] // Optional
    // ... other consultation details
  }
}
```